<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ÎèåÎ¶ºÌåê Í≤åÏûÑ</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      padding: 20px;
      background-color: #f7f7f7;
    }
    h1 {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    #wheelCanvas {
      background-color: #fff;
      border: 6px solid #555;
      border-radius: 50%;
      margin: 20px auto;
      display: block;
      box-shadow: 0 0 10px rgba(0,0,0,0.15);
    }
    #spinButton {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 18px;
      cursor: pointer;
      border: 1px solid #999;
      background-color: #fff;
      border-radius: 4px;
      transition: background-color 0.3s;
    }
    #spinButton:hover {
      background-color: #f0f0f0;
    }
    #result {
      margin-top: 20px;
      font-size: 22px;
      font-weight: bold;
      color: #444;
    }
    #arrow {
      position: relative;
      width: 0; 
      height: 0; 
      margin: 0 auto;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-bottom: 25px solid red;
      margin-bottom: -20px;
    }
  </style>
</head>
<body>

  <h1>üéØ ÎèåÎ¶ºÌåê Í≤åÏûÑ</h1>
  <div id="arrow"></div>
  <canvas id="wheelCanvas" width="400" height="400"></canvas>
  <button id="spinButton">ÎèåÎ¶¨Í∏∞!</button>
  <div id="result"></div>

  <script>
    const canvas = document.getElementById('wheelCanvas');
    const ctx = canvas.getContext('2d');
    const spinButton = document.getElementById('spinButton');
    const resultDiv = document.getElementById('result');

    const segments = ['1,000P', '3,000P', '5,000P', '10,000P', 'ÏπòÌÇ®'];
    const colors = ['#ff6b81', '#3498db', '#f1c40f', '#1abc9c', '#9b59b6'];

    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const outsideRadius = 180;
    const textRadius = 120;
    const insideRadius = 70;

    let startAngle = 0;
    const arc = (2 * Math.PI) / segments.length;
    let spinTimeout = null;

    let spinAngleStart = 0;
    let spinTime = 0;
    let spinTimeTotal = 0;

    function drawWheel() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw segments
      for(let i = 0; i < segments.length; i++) {
        const angle = startAngle + i * arc;
        ctx.fillStyle = colors[i];
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.arc(centerX, centerY, outsideRadius, angle, angle + arc, false);
        ctx.lineTo(centerX, centerY);
        ctx.fill();

        // Draw text
        ctx.save();
        ctx.fillStyle = 'white';
        ctx.font = 'bold 22px Arial';
        ctx.translate(
          centerX + Math.cos(angle + arc / 2) * textRadius,
          centerY + Math.sin(angle + arc / 2) * textRadius
        );
        ctx.rotate(angle + arc / 2 + Math.PI / 2);
        ctx.textAlign = 'center';
        ctx.fillText(segments[i], 0, 0);
        ctx.restore();
      }

      // Draw inner circle
      ctx.beginPath();
      ctx.fillStyle = '#fff';
      ctx.arc(centerX, centerY, insideRadius, 0, 2 * Math.PI);
      ctx.fill();

      // Draw border circle
      ctx.beginPath();
      ctx.lineWidth = 6;
      ctx.strokeStyle = '#555';
      ctx.arc(centerX, centerY, outsideRadius, 0, 2 * Math.PI);
      ctx.stroke();
    }

    function spin() {
      spinAngleStart = Math.random() * 2000 + 3000; // Îπ†Î•¥Í≥† Îã§ÏñëÌïòÍ≤å ÎèåÍ≤å
      spinTime = 0;
      spinTimeTotal = Math.random() * 3000 + 4000; // ÎèåÎ¶¨Îäî ÏãúÍ∞ÑÎèÑ Ï°∞Í∏à Í∏∏Í≤å
      rotateWheel();
    }

    function rotateWheel() {
      spinTime += 30;
      if(spinTime >= spinTimeTotal) {
        stopRotateWheel();
        return;
      }
      const spinAngle = spinAngleStart * Math.sin((spinTime / spinTimeTotal) * (Math.PI / 2));
      startAngle += (spinAngle * Math.PI) / 180;
      drawWheel();
      spinTimeout = setTimeout(rotateWheel, 30);
    }

    function stopRotateWheel() {
      clearTimeout(spinTimeout);

      // 265ÎèÑÏóêÏÑú 270ÎèÑÎ°ú Î≥¥Ï†ï Ï°∞Ï†ï
      const degrees = (startAngle * 180) / Math.PI + 270;
      const arcd = (arc * 180) / Math.PI;

      // 360ÎèÑÏóêÏÑú Î≥¥Ï†ïÎêú Í∞ÅÎèÑÎ•º ÎπºÍ≥† Í∞Å ÌååÏù¥ Ï°∞Í∞ÅÏúºÎ°ú ÎÇòÎà† Ïù∏Îç±Ïä§ Í≥ÑÏÇ∞
      let index = Math.floor((360 - (degrees % 360)) / arcd);
      index = index % segments.length;

      const selected = segments[index];
      resultDiv.textContent = `üéâ Ï∂ïÌïòÌï©ÎãàÎã§! ÎãπÏ≤®: ${selected}`;
    }

    drawWheel();

    spinButton.addEventListener('click', () => {
      resultDiv.textContent = '';
      spin();
    });
  </script>

</body>
</html>
